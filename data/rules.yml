version: "3.1"

rules:

# Removed the rule that used utter_ask_study_phase after start_project_scoping

- rule: Start project scoping
  steps:
    - intent: start_project_scoping
    - action: action_start_project_scoping

- rule: Ask for therapeutic area after study phase
  condition:
    - slot_was_set:
        - study_phase: true
  steps:
    - action: utter_ask_therapeutic_area

- rule: Ask for services after therapeutic area
  condition:
    - slot_was_set:
        - therapeutic_area: true
  steps:
    - action: utter_ask_services_needed

- rule: Ask for patient population after services
  condition:
    - slot_was_set:
        - services_needed: true
  steps:
    - action: utter_ask_patient_population

- rule: Ask for timeline after patient population
  condition:
    - slot_was_set:
        - patient_population: true
  steps:
    - action: utter_ask_timeline

# Updated this rule to allow action_match_cros to follow action_output_project_scope
- rule: Output project scope and match CROs when complete
  condition:
    - slot_was_set:
        - timeline: true
  steps:
    - intent: complete_project_scope
    - action: action_output_project_scope
    - action: action_match_cros

- rule: Send project after CRO selection
  steps:
    - intent: select_cro
    - action: action_send_project

- rule: Say goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye
