version: "3.1"

rules:

- rule: Activate project scope form
  steps:
    - intent: start_project_scoping
    - action: project_scope_form
    - active_loop: project_scope_form

- rule: Submit project scope form
  condition:
    - active_loop: project_scope_form
  steps:
    - action: project_scope_form
    - active_loop: null
    - action: action_output_project_scope
    - action: action_match_cros

- rule: Send project after CRO selection
  steps:
    - intent: select_cro
    - action: action_send_project

- rule: Say goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye

- rule: Clarify timeline unit
  condition:
    - slot_was_set:
        - timeline_unit_pending: true
  steps:
    - intent: inform_timeline_unit
    - action: action_set_timeline_unit

- rule: Clarify project scoping intent if not understood
  condition:
    - active_loop: null
  steps:
    - intent: nlu_fallback
    - action: action_start_project_scoping_fallback
